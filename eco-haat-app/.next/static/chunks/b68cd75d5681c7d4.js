(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},1928,e=>{"use strict";let t=(0,e.i(75254).default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);e.s(["ShoppingCart",()=>t],1928)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),i=e.i(31178),s=e.i(47414),n=e.i(74008),l=e.i(21476),a=e.i(72846),o=r,c=e.i(37806);function h(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class d extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,a.isHTMLElement)(e)&&e.offsetWidth||0,i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft,i.right=r-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u({children:e,isPresent:i,anchorX:s,root:n}){let l=(0,o.useId)(),a=(0,o.useRef)(null),u=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:f}=(0,o.useContext)(c.MotionConfigContext),x=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,i=e.map(e=>{let i=h(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():h(e[t],null)}}}}(...e),e)}(a,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:o,right:c}=u.current;if(i||!a.current||!e||!t)return;let h="left"===s?`left: ${o}`:`right: ${c}`;a.current.dataset.motionPopId=l;let d=document.createElement("style");f&&(d.nonce=f);let x=n??document.head;return x.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${h}px !important;
            top: ${r}px !important;
          }
        `),()=>{x.contains(d)&&x.removeChild(d)}},[i]),(0,t.jsx)(d,{isPresent:i,childRef:a,sizeRef:u,children:o.cloneElement(e,{ref:x})})}let f=({children:e,initial:i,isPresent:n,onExitComplete:a,custom:o,presenceAffectsLayout:c,mode:h,anchorX:d,root:f})=>{let m=(0,s.useConstant)(x),p=(0,r.useId)(),g=!0,y=(0,r.useMemo)(()=>(g=!1,{id:p,initial:i,isPresent:n,custom:o,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;a&&a()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[n,m,a]);return c&&g&&(y={...y}),(0,r.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[n]),r.useEffect(()=>{n||m.size||!a||a()},[n]),"popLayout"===h&&(e=(0,t.jsx)(u,{isPresent:n,anchorX:d,root:f,children:e})),(0,t.jsx)(l.PresenceContext.Provider,{value:y,children:e})};function x(){return new Map}var m=e.i(64978);let p=e=>e.key||"";function g(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:l,initial:a=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:h="sync",propagate:d=!1,anchorX:u="left",root:x})=>{let[y,j]=(0,m.usePresence)(d),w=(0,r.useMemo)(()=>g(e),[e]),b=d&&!y?[]:w.map(p),v=(0,r.useRef)(!0),N=(0,r.useRef)(w),k=(0,s.useConstant)(()=>new Map),C=(0,r.useRef)(new Set),[E,P]=(0,r.useState)(w),[M,z]=(0,r.useState)(w);(0,n.useIsomorphicLayoutEffect)(()=>{v.current=!1,N.current=w;for(let e=0;e<M.length;e++){let t=p(M[e]);b.includes(t)?(k.delete(t),C.current.delete(t)):!0!==k.get(t)&&k.set(t,!1)}},[M,b.length,b.join("-")]);let S=[];if(w!==E){let e=[...w];for(let t=0;t<M.length;t++){let r=M[t],i=p(r);b.includes(i)||(e.splice(t,0,r),S.push(r))}return"wait"===h&&S.length&&(e=S),z(g(e)),P(w),null}let{forceRender:R}=(0,r.useContext)(i.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:M.map(e=>{let r=p(e),i=(!d||!!y)&&(w===M||b.includes(r));return(0,t.jsx)(f,{isPresent:i,initial:(!v.current||!!a)&&void 0,custom:l,presenceAffectsLayout:c,mode:h,root:x,onExitComplete:i?void 0:()=>{if(C.current.has(r)||(C.current.add(r),!k.has(r)))return;k.set(r,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(R?.(),z(N.current),d&&j?.(),o&&o())},anchorX:u,children:e},r)})})};e.s(["AnimatePresence",()=>y],88653)},78209,e=>{"use strict";var t=e.i(43476),r=e.i(22016),i=e.i(71645),s=e.i(46932),n=e.i(88653),l=e.i(75254);let a=(0,l.default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var o=e.i(37727),c=e.i(1928);let h=(0,l.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),d=(0,l.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=e.i(6045),f=e.i(3802);function x(){let[e,l]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),[p,g]=(0,i.useState)(0),[y,j]=(0,i.useState)(!1),w=(0,u.createClient)();(0,i.useEffect)(()=>{(async()=>{let{data:{user:e}}=await w.auth.getUser();if(e){let{data:t}=await w.from("profiles").select("*").eq("id",e.id).single();t&&m(t);let{count:r}=await w.from("cart_items").select("*",{count:"exact",head:!0}).eq("buyer_id",e.id);g(r||0)}})();let{data:{subscription:e}}=w.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_OUT"===e)m(null),g(0);else if(t?.user){let{data:e}=await w.from("profiles").select("*").eq("id",t.user.id).single();e&&m(e)}});return()=>e.unsubscribe()},[w]),(0,i.useEffect)(()=>{let e=()=>{j(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let b=async()=>{await w.auth.signOut(),window.location.href="/"},v=()=>{if(!x)return"/login";switch(x.role){case"admin":return"/admin";case"seller":return"/seller";default:return"/"}},N=[{href:"/",label:"Home"},{href:"/products",label:"Products"},{href:"/#categories",label:"Categories"},{href:"/#about",label:"About"}];return(0,t.jsxs)(s.motion.nav,{initial:{y:-100},animate:{y:0},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${y?"bg-white/95 backdrop-blur-md shadow-lg":"bg-transparent"}`,children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 md:h-20",children:[(0,t.jsxs)(r.default,{href:"/",className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-2xl",children:"ðŸŒ¿"}),(0,t.jsx)("span",{className:`text-xl md:text-2xl font-display font-bold ${y?"text-primary-800":"text-white"}`,children:"Eco Haat"})]}),(0,t.jsx)("div",{className:"hidden md:flex items-center gap-8",children:N.map(e=>(0,t.jsx)(r.default,{href:e.href,className:`font-medium transition-colors ${y?"text-gray-700 hover:text-primary-600":"text-white/90 hover:text-white"}`,children:e.label},e.href))}),(0,t.jsxs)("div",{className:"hidden md:flex items-center gap-4",children:[(0,t.jsxs)(r.default,{href:"/cart",className:`relative p-2 rounded-full transition-colors ${y?"text-gray-700 hover:bg-gray-100":"text-white hover:bg-white/10"}`,children:[(0,t.jsx)(c.ShoppingCart,{size:24}),p>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:p})]}),x?(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.default,{href:v(),children:(0,t.jsxs)(f.Button,{variant:"ghost",size:"sm",className:y?"":"text-white hover:bg-white/10",children:[(0,t.jsx)(d,{size:18,className:"mr-2"}),"Dashboard"]})}),(0,t.jsx)("button",{onClick:b,className:`p-2 rounded-full transition-colors ${y?"text-gray-700 hover:bg-gray-100":"text-white hover:bg-white/10"}`,children:(0,t.jsx)(h,{size:20})})]}):(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.default,{href:"/login",children:(0,t.jsx)(f.Button,{variant:"ghost",size:"sm",className:y?"":"text-white hover:bg-white/10",children:"Login"})}),(0,t.jsx)(r.default,{href:"/register",children:(0,t.jsx)(f.Button,{size:"sm",children:"Join Now"})})]})]}),(0,t.jsx)("button",{className:"md:hidden p-2",onClick:()=>l(!e),children:e?(0,t.jsx)(o.X,{size:24,className:y?"text-gray-900":"text-white"}):(0,t.jsx)(a,{size:24,className:y?"text-gray-900":"text-white"})})]})}),(0,t.jsx)(n.AnimatePresence,{children:e&&(0,t.jsx)(s.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-t shadow-lg",children:(0,t.jsxs)("div",{className:"px-4 py-4 space-y-3",children:[N.map(e=>(0,t.jsx)(r.default,{href:e.href,className:"block py-2 text-gray-700 hover:text-primary-600 font-medium",onClick:()=>l(!1),children:e.label},e.href)),(0,t.jsx)("hr",{className:"my-4"}),x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{href:v(),className:"block py-2 text-gray-700 hover:text-primary-600",onClick:()=>l(!1),children:"Dashboard"}),(0,t.jsx)("button",{onClick:b,className:"block w-full text-left py-2 text-red-600",children:"Logout"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(r.default,{href:"/login",onClick:()=>l(!1),children:(0,t.jsx)(f.Button,{variant:"secondary",className:"w-full",children:"Login"})}),(0,t.jsx)(r.default,{href:"/register",onClick:()=>l(!1),children:(0,t.jsx)(f.Button,{className:"w-full",children:"Join Now"})})]})]})})})]})}e.s(["Navbar",()=>x],78209)}]);