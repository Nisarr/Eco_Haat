(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75529,e=>{"use strict";var s=e.i(43476);function a({children:e,variant:a="default",size:t="md",className:r=""}){return(0,s.jsx)("span",{className:`
      inline-flex items-center font-medium rounded-full
      ${{default:"bg-gray-100 text-gray-700",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-800",eco:"bg-gradient-to-r from-primary-100 to-primary-200 text-primary-800 border border-primary-300"}[a]} ${{sm:"px-2 py-0.5 text-xs",md:"px-3 py-1 text-sm"}[t]} ${r}
    `,children:e})}function t({status:e}){let t={pending:{variant:"warning",icon:"â³",label:"Pending"},approved:{variant:"success",icon:"âœ…",label:"Approved"},rejected:{variant:"danger",icon:"âŒ",label:"Rejected"}}[e];return(0,s.jsxs)(a,{variant:t.variant,children:[(0,s.jsx)("span",{className:"mr-1",children:t.icon}),t.label]})}function r({score:e}){return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:`flex items-center gap-1 ${e>=80?"text-green-600":e>=60?"text-lime-600":e>=40?"text-yellow-600":"text-orange-600"}`,children:[(0,s.jsx)("span",{children:e>=80?"ðŸŒ¿":e>=60?"ðŸŒ±":e>=40?"ðŸƒ":"ðŸŒ¾"}),(0,s.jsxs)("span",{className:"font-bold text-lg",children:[e,"%"]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"Eco Score"})]})}e.s(["Badge",()=>a,"EcoRating",()=>r,"StatusBadge",()=>t])},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},5036,e=>{"use strict";var s=e.i(43476),a=e.i(46932);function t({children:e,className:t="",hover:r=!1,glass:i=!1}){return(0,s.jsx)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`rounded-2xl overflow-hidden ${r?"card-hover cursor-pointer":""} ${i?"glass":"bg-white border border-gray-100 shadow-sm"} ${t}`,children:e})}function r({children:e,className:a=""}){return(0,s.jsx)("div",{className:`px-6 py-4 border-b border-gray-100 ${a}`,children:e})}function i({children:e,className:a=""}){return(0,s.jsx)("div",{className:`p-6 ${a}`,children:e})}e.s(["Card",()=>t,"CardContent",()=>i,"CardHeader",()=>r])},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},31674,e=>{"use strict";let s=(0,e.i(75254).default)("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);e.s(["Leaf",()=>s],31674)},86536,e=>{"use strict";let s=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},15717,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(22016),r=e.i(46932),i=e.i(88653),l=e.i(71689);let n=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var c=e.i(37727),d=e.i(86536),o=e.i(31674),x=e.i(31278),m=e.i(6045),p=e.i(5036),u=e.i(3802),h=e.i(75529);function g(){let[e,g]=(0,a.useState)([]),[f,j]=(0,a.useState)(!0),[y,b]=(0,a.useState)("pending"),[v,N]=(0,a.useState)(null),[w,C]=(0,a.useState)(85),[k,S]=(0,a.useState)(""),[z,E]=(0,a.useState)(!1),A=(0,m.createClient)();(0,a.useEffect)(()=>{B()},[y]);let B=async()=>{j(!0);try{let e=A.from("products").select("*, profiles(full_name, email)").order("created_at",{ascending:!1});"all"!==y&&(e=e.eq("status",y));let{data:s}=await e;s&&g(s)}catch(e){console.error("Error fetching products:",e)}finally{j(!1)}},$=async()=>{if(v){E(!0);try{await A.from("products").update({status:"approved",eco_rating:w}).eq("id",v.id),g(e=>e.map(e=>e.id===v.id?{...e,status:"approved",eco_rating:w}:e)),N(null),C(85)}catch(e){console.error("Error approving product:",e)}finally{E(!1)}}},L=async()=>{if(v){E(!0);try{await A.from("products").update({status:"rejected",rejection_reason:k}).eq("id",v.id),g(e=>e.map(e=>e.id===v.id?{...e,status:"rejected"}:e)),N(null),S("")}catch(e){console.error("Error rejecting product:",e)}finally{E(!1)}}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 pt-24",children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)(t.default,{href:"/admin",className:"inline-flex items-center gap-2 text-gray-600 hover:text-primary-600 mb-2",children:[(0,s.jsx)(l.ArrowLeft,{size:20}),"Back to Dashboard"]}),(0,s.jsx)("h1",{className:"text-3xl font-display font-bold text-gray-900",children:"Product Moderation"})]})}),(0,s.jsx)("div",{className:"flex gap-2 mb-6",children:["pending","approved","rejected","all"].map(e=>(0,s.jsx)("button",{onClick:()=>b(e),className:`px-4 py-2 rounded-xl font-medium capitalize transition-colors ${y===e?"bg-primary-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:e},e))}),f?(0,s.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,a)=>(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-4 animate-pulse",children:[(0,s.jsx)("div",{className:"aspect-video bg-gray-200 rounded-xl mb-4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},a))}):0===e.length?(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"ðŸ“¦"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No products found"}),(0,s.jsxs)("p",{className:"text-gray-500",children:["No ","all"===y?"":y," products to display"]})]}):(0,s.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,s.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,s.jsxs)(p.Card,{hover:!0,children:[(0,s.jsxs)("div",{className:"aspect-video bg-gray-100 relative overflow-hidden rounded-t-2xl",children:[e.images?.[0]?(0,s.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-4xl",children:"ðŸŒ¿"}),(0,s.jsx)("div",{className:"absolute top-3 right-3",children:(0,s.jsx)(h.StatusBadge,{status:e.status})})]}),(0,s.jsxs)(p.CardContent,{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["by ",e.profiles?.full_name," â€¢ à§³",e.price]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-4",children:e.description}),"pending"===e.status?(0,s.jsxs)(u.Button,{className:"w-full",onClick:()=>N(e),children:[(0,s.jsx)(d.Eye,{size:18,className:"mr-2"}),"Review Product"]}):e.eco_rating?(0,s.jsxs)("div",{className:"flex items-center gap-2 text-primary-600",children:[(0,s.jsx)(o.Leaf,{size:18}),(0,s.jsxs)("span",{className:"font-medium",children:["Eco Score: ",e.eco_rating,"%"]})]}):null]})]})},e.id))})]}),(0,s.jsx)(i.AnimatePresence,{children:v&&(0,s.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>N(null),children:(0,s.jsxs)(r.motion.div,{initial:{scale:.95},animate:{scale:1},exit:{scale:.95},className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"p-6 border-b",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"w-32 h-32 bg-gray-100 rounded-xl overflow-hidden flex-shrink-0",children:v.images?.[0]?(0,s.jsx)("img",{src:v.images[0],alt:v.name,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-4xl",children:"ðŸŒ¿"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:v.name}),(0,s.jsxs)("p",{className:"text-gray-500 mt-1",children:["by ",v.profiles?.full_name]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2 text-sm",children:[(0,s.jsxs)("span",{className:"text-primary-600 font-medium",children:["à§³",v.price]}),(0,s.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,s.jsx)("span",{className:"text-gray-600",children:v.material})]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-3 line-clamp-3",children:v.description})]})]})}),(0,s.jsxs)("div",{className:"p-6 border-b",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(o.Leaf,{className:"text-primary-500",size:20}),"Assign Eco-Friendliness Rating"]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("input",{type:"range",min:"0",max:"100",value:w,onChange:e=>C(Number(e.target.value)),className:"flex-1 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary-500"}),(0,s.jsx)("div",{className:"w-20 text-center",children:(0,s.jsxs)("span",{className:"text-2xl font-bold text-primary-600",children:[w,"%"]})})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-2",children:[(0,s.jsx)("span",{children:"Low"}),(0,s.jsx)("span",{children:"High"})]})]}),(0,s.jsxs)("div",{className:"p-6 border-b",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Rejection Reason (if rejecting)"}),(0,s.jsx)("textarea",{value:k,onChange:e=>S(e.target.value),placeholder:"Explain why this product is being rejected...",className:"w-full p-3 border border-gray-200 rounded-xl focus:border-primary-500 focus:ring-2 focus:ring-primary-100 outline-none",rows:3})]}),(0,s.jsxs)("div",{className:"p-6 flex gap-4",children:[(0,s.jsx)(u.Button,{variant:"secondary",className:"flex-1",onClick:()=>N(null),children:"Cancel"}),(0,s.jsxs)(u.Button,{variant:"danger",className:"flex-1",onClick:L,disabled:z,children:[z?(0,s.jsx)(x.Loader2,{className:"animate-spin"}):(0,s.jsx)(c.X,{size:18}),(0,s.jsx)("span",{className:"ml-2",children:"Reject"})]}),(0,s.jsxs)(u.Button,{className:"flex-1",onClick:$,disabled:z,children:[z?(0,s.jsx)(x.Loader2,{className:"animate-spin"}):(0,s.jsx)(n,{size:18}),(0,s.jsx)("span",{className:"ml-2",children:"Approve"})]})]})]})})})]})}e.s(["default",()=>g],15717)}]);